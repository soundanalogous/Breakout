<!DOCTYPE html>
<html>
<head>

<meta charset=utf-8 />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<style type="text/css">
body {
	margin: 20px;
	font-family: sans-serif;
	font-size: 18px;
	color: #00AEFF;
	width: 600px;
}
h2 {
	font-size: 22px;
	padding-bottom: 10px;
}
#duration {
	width: 50px;
}
.container {
	background-color: #f7f7f7;
	padding-left: 10px;
	border: 1px dotted #CCC;
	width: 280px;
	margin-top: 20px;
}
.Btns {
	padding: 10px;
	font-size: 16px;
	width: 80px;
	color: #00AEFF;
	margin-top: 10px;
	margin-bottom: 10px;
}
label {
	font-size: 14px;
	color: #666;
}
.spacer {
	margin-left: 5px;
}
</style>

<title>Duo Led Example</title>

<script src="../../dist/Breakout.js"></script>
<script src="../libs/jquery-1.8.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
	// Declare these variables so you don't have to type the full
	// namespace.
	var IOBoard = BO.IOBoard;
	var IOBoardEvent = BO.IOBoardEvent;
	var DUOLED = BO.io.DUOLED;

	// Set to true to print debug messages to console
	BO.enableDebugging = false;	

	// If you are not serving this file from the same computer that 
	// the IOBoard is connected to, replace location.hostname  with
	// the IP address or hostname of the computer that the IOBoard
	// is connected to.
	var arduino = new IOBoard(location.hostname, 8887);
	
	// Variables
	var duoLED;
	var duration = 500;

	// Listen for the IOBoard READY event which indicates the IOBoard
	// is ready to send and receive data
	arduino.addEventListener(IOBoardEvent.READY, onReady);

	function onReady(event) {	
		// Remove the listener because it is no longer needed
		arduino.removeEventListener(IOBoardEvent.READY, onReady);

		// Duo LED example using DUOLED object:
		// NOTE: The r and g pins of the LED must be connected to PWM
		// pins on the IOBoard (eg. 11, 10, 9, 6, 5, or 3).
		// Change COMMON_CATHODE to COMMON_ANODE according to your LED
		// type
		// Parameters: board, redLEDPin, greenLEDPin, driveMode
		duoLED = new DUOLED(
			arduino, 
			arduino.getDigitalPin(10),
			arduino.getDigitalPin(11),
			DUOLED.COMMON_CATHODE);

		// Listener for GUI events
		initGUIListeners();
	}

	function onButtonPress(event) {
		randomColor();
	}	

	function initGUIListeners() {
		$('#duration').change(function(evt) {
			var val = this.value;
			if (val >= 0) {
				duration = val;
			}
		});
		
		$('button#Green').on('click', function() {
			duoLED.setColor(255, 0, 0);
		});

		$('button#Red').on('click', function() {
			duoLED.setColor(0, 255, 0);
		});
		
		$('button#Random').on('click', function() {
			randomColor(duration);
		});
		
		$('button#Off').on('click', function() {
			duoLED.setColor(0, 0, 0);
		});		
	}
	
	// Fade the Duo LED to a random color
	function randomColor(duration) {
		var red = Math.floor(Math.random() * 255);
		var green = Math.floor(Math.random() * 255);
		duoLED.fadeTo(red, green, duration);
	}			
});

</script>

</head>
<body>
	<h2>Duo LED Example</h2>

	<p>Choose the color </p>
	<div class="container">
		<button type="button" class="Btns" id="Red">Red</button>
		<span class="spacer"></span>
		<button type="button" class="Btns" id="Green">Green</button>
		<span class="spacer"></span>
		<button type="button" class="Btns" id="Off">Off</button>

	</div>
		<div class="container">
		<label for="duration">Fade duration in milliseconds: </label>
		<input id="duration" type="number" value="500" min="0" step="100" />
		<button type="button" class="Btns" id="Random">Random</button>
	</div>
</body>
</html>
